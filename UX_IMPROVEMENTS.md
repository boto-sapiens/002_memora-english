# ‚úÖ UX –£–ª—É—á—à–µ–Ω–∏—è - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

## –ß—Ç–æ —É–ª—É—á—à–µ–Ω–æ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ê—É–¥–∏–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª–∏—Å—å –≤ —á–∞—Ç–µ

**–†–µ—à–µ–Ω–∏–µ**: 
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –æ—Ü–µ–Ω–∫–∏ (‚úÖü§î‚ùå) ‚Üí –∞—É–¥–∏–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è
- –ß–∞—Ç –æ—Å—Ç–∞–µ—Ç—Å—è —á–∏—Å—Ç—ã–º
- –¢–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∏ –µ—ë –∞—É–¥–∏–æ

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `last_audio_message_id` –≤ –º–æ–¥–µ–ª—å User
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∞—É–¥–∏–æ ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è message_id
- –ü—Ä–∏ –æ—Ü–µ–Ω–∫–µ –∫–∞—Ä—Ç–æ—á–∫–∏ ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `delete_last_audio()`
- –£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `bot.delete_message()`

---

### 2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

**–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ:**
```
üìä –ü—Ä–æ–≥—Ä–µ—Å—Å: 5/21
```

**–ì–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –í —Ñ–∞–∑–µ –æ–±—É—á–µ–Ω–∏—è: "–ü—Ä–æ–≥—Ä–µ—Å—Å: 1/21", "–ü—Ä–æ–≥—Ä–µ—Å—Å: 2/21", ...
- –í —Ñ–∞–∑–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è: "–ü—Ä–æ–≥—Ä–µ—Å—Å: 1/21" (—Å–∫–æ–ª—å–∫–æ –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏)

**–ù–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è** –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏!

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ú–æ–¥–µ–ª—å User (–Ω–æ–≤–æ–µ –ø–æ–ª–µ)

```python
@dataclass
class User:
    # ... existing fields ...
    last_audio_message_id: Optional[int] = None  # –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è
```

### Audio Service (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç message_id)

```python
async def play_teacher_audio(...) -> Optional[int]:
    sent_message = await bot.send_audio(...)
    
    # Save message_id for deletion
    user.last_audio_message_id = sent_message.message_id
    await storage.save_user(user)
    
    return sent_message.message_id
```

### Review Handler (—É–¥–∞–ª—è–µ—Ç –∞—É–¥–∏–æ)

```python
async def show_next_card(callback, telegram_id):
    # Delete last audio first!
    await delete_last_audio(callback, telegram_id)
    
    # Then show next card
    card = await get_next_card(...)
    await callback.message.edit_text(f"–ü—Ä–æ–≥—Ä–µ—Å—Å: {x}/{y}...")
```

---

## Workflow —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º UX

### 1. –ü–æ–∫–∞–∑ –∫–∞—Ä—Ç–æ—á–∫–∏
```
üìñ –ö–∞—Ä—Ç–æ—á–∫–∞ 1/21
üìä –ü—Ä–æ–≥—Ä–µ—Å—Å: 1/21
üá∑üá∫ –ß—É–¥–µ—Å–Ω—ã–π –¥–µ–Ω—å, –Ω–µ –ø—Ä–∞–≤–¥–∞ –ª–∏
[üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç]
```

### 2. –ü–æ—Å–ª–µ "–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç"
```
üá¨üáß Charming day it has been
üìù [Ààt É…ëÀêm…™≈ã de…™ …™t h√¶z biÀên]

[‚ñ∂Ô∏è –ì–æ–ª–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è]
[üé≠ –ì–æ–ª–æ—Å –∞–∫—Ç–µ—Ä–∞]
[‚úÖ –ó–Ω–∞–ª] [ü§î –°–æ–º–Ω–µ–≤–∞–ª—Å—è] [‚ùå –ù–µ –∑–Ω–∞–ª]
```

### 3. –ù–∞–∂–∞—Ç–∏–µ "‚ñ∂Ô∏è –ì–æ–ª–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è"
```
üéµ –ê—É–¥–∏–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç
message_id —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
```

### 4. –ù–∞–∂–∞—Ç–∏–µ "‚úÖ –ó–Ω–∞–ª"
```
1. –ê—É–¥–∏–æ —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! ‚Üê NEW!
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
3. –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è: 2/21
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –ß–∏—Å—Ç—ã–π —á–∞—Ç
- –°—Ç–∞—Ä—ã–µ –∞—É–¥–∏–æ –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
- –¢–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –≤–∏–¥–Ω–∞
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- –í—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–æ –≥–¥–µ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å
- "–ü—Ä–æ–≥—Ä–µ—Å—Å: X/Y" –Ω–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
- –ú–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å

### –ë–µ–∑ —Ç–∞–π–º–µ—Ä–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–π
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π:

1. `/start` ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∞ 1/21
2. "üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç" ‚Üí –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
3. "‚ñ∂Ô∏è –ì–æ–ª–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è" ‚Üí –∞—É–¥–∏–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
4. **"‚úÖ –ó–Ω–∞–ª"** ‚Üí 
   - ‚úÖ –ê—É–¥–∏–æ —É–¥–∞–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
   - ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ 2/21 –ø–æ–∫–∞–∑–∞–Ω–∞
   - ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω: 2/21
5. "üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç" ‚Üí –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (–∫–∞—Ä—Ç–æ—á–∫–∞ 2)
6. "üé≠ –ì–æ–ª–æ—Å –∞–∫—Ç–µ—Ä–∞" ‚Üí –≤—Ç–æ—Ä–æ–µ –∞—É–¥–∏–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
7. **"ü§î –°–æ–º–Ω–µ–≤–∞–ª—Å—è"** ‚Üí
   - ‚úÖ –í—Ç–æ—Ä–æ–µ –∞—É–¥–∏–æ —É–¥–∞–ª–µ–Ω–æ!
   - ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ 3/21
   - ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å: 3/21

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ß–∞—Ç —á–∏—Å—Ç—ã–π, —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞!

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ï—Å–ª–∏ –∞—É–¥–∏–æ —É–∂–µ —É–¥–∞–ª–µ–Ω–æ:
- TelegramBadRequest –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è warning
- –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –æ—à–∏–±–æ–∫

### –ï—Å–ª–∏ message_id None:
- –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç:
- message_id –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –ü—Ä–∏ –æ—Ü–µ–Ω–∫–µ –Ω–∏—á–µ–≥–æ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è
- –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## –§–∞–π–ª—ã

### –ò–∑–º–µ–Ω–µ–Ω—ã:
1. `storage/models.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ last_audio_message_id
2. `services/audio_service.py` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç message_id –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç
3. `handlers/audio.py` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã callback –æ—Ç–≤–µ—Ç—ã
4. `handlers/review.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ delete_last_audio() –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
5. `handlers/start.py` - –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –∫–∞—Ä—Ç–æ—á–∫–∏

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

**–ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º UX:**
- ‚úÖ –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ –ø–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
- ‚úÖ –ß–∏—Å—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ë–µ–∑ —Ç–∞–π–º–µ—Ä–æ–≤
- ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!** üöÄ

