# ‚úÖ INLINE –ê–£–î–ò–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û!

## üéØ –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê—É–¥–∏–æ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –∑–∞—Å–æ—Ä—è—è —á–∞—Ç  
**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ inline –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ  
**–°—Ç–∞—Ç—É—Å:** üéä PRODUCTION READY

---

## üîß –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. **–û–±–Ω–æ–≤–ª–µ–Ω `services/audio_service.py`**

**–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `get_teacher_media()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `InputMediaAudio` –¥–ª—è inline –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- `get_actor_media()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `InputMediaAudio` –¥–ª—è inline –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è  
- `cache_file_id()` - –∫—ç—à–∏—Ä—É–µ—Ç file_id –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–£–±—Ä–∞–Ω–æ:**
- `play_teacher_audio()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `play_actor_audio()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω `handlers/audio.py`**

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
```python
# –ü–æ–ª—É—á–∞–µ–º –∞—É–¥–∏–æ –º–µ–¥–∏–∞
audio_media = await audio_service.get_teacher_media(card_id, telegram_id)

# –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∞—É–¥–∏–æ –ø–ª–µ–µ—Ä–æ–º
await callback.message.edit_media(
    media=audio_media,
    reply_markup=callback.message.reply_markup  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–Ω–æ–ø–∫–∏
)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê—É–¥–∏–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ —Ç–æ–º –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏!

### 3. **–£–±—Ä–∞–Ω–æ –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ**

**–£–¥–∞–ª–µ–Ω–æ –∏–∑ `handlers/review.py`:**
- –§—É–Ω–∫—Ü–∏—è `delete_last_audio()`
- –í—ã–∑–æ–≤—ã `await delete_last_audio()`

**–£–¥–∞–ª–µ–Ω–æ –∏–∑ `storage/models.py`:**
- –ü–æ–ª–µ `last_audio_message_id`

### 4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ file_id**

- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ –∞—É–¥–∏–æ file_id –∫—ç—à–∏—Ä—É–µ—Ç—Å—è
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π file_id
- –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏

---

## üéÆ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–∞—Ä—Ç–æ—á–∫—É:**
```
üá¨üáß Charming day it has been
üìù [Ààt É…ëÀêm…™≈ã de…™ …™t h√¶z biÀên]

[‚ñ∂Ô∏è –ì–æ–ª–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è] [üé≠ –ì–æ–ª–æ—Å –∞–∫—Ç–µ—Ä–∞]
[‚úÖ –ó–Ω–∞–ª] [ü§î –°–æ–º–Ω–µ–≤–∞–ª—Å—è] [‚ùå –ù–µ –∑–Ω–∞–ª]
```

### 2. **–ù–∞–∂–∏–º–∞–µ—Ç "‚ñ∂Ô∏è –ì–æ–ª–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è":**
```
üéß [–ê–£–î–ò–û –ü–õ–ï–ï–†] üéß
üá¨üáß Charming day it has been
üìù [Ààt É…ëÀêm…™≈ã de…™ …™t h√¶z biÀên]

[‚ñ∂Ô∏è –ì–æ–ª–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è] [üé≠ –ì–æ–ª–æ—Å –∞–∫—Ç–µ—Ä–∞]
[‚úÖ –ó–Ω–∞–ª] [ü§î –°–æ–º–Ω–µ–≤–∞–ª—Å—è] [‚ùå –ù–µ –∑–Ω–∞–ª]
```

**–¢–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ —Å –∞—É–¥–∏–æ –ø–ª–µ–µ—Ä–æ–º!**

### 3. **–ù–∞–∂–∏–º–∞–µ—Ç "üé≠ –ì–æ–ª–æ—Å –∞–∫—Ç–µ—Ä–∞":**
```
üé≠ [–ê–£–î–ò–û –ü–õ–ï–ï–†] üé≠
üá¨üáß Charming day it has been
üìù [Ààt É…ëÀêm…™≈ã de…™ …™t h√¶z biÀên]

[‚ñ∂Ô∏è –ì–æ–ª–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è] [üé≠ –ì–æ–ª–æ—Å –∞–∫—Ç–µ—Ä–∞]
[‚úÖ –ó–Ω–∞–ª] [ü§î –°–æ–º–Ω–µ–≤–∞–ª—Å—è] [‚ùå –ù–µ –∑–Ω–∞–ª]
```

**–¢–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ —Å –¥—Ä—É–≥–∏–º –∞—É–¥–∏–æ!**

### 4. **–ù–∞–∂–∏–º–∞–µ—Ç –æ—Ü–µ–Ω–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "‚úÖ –ó–Ω–∞–ª"):**
```
üìä –ü—Ä–æ–≥—Ä–µ—Å—Å: 2/21
üá∑üá∫ Pray don't talk to me about the weather, Mr. Worthing

[üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç]
```

**–ù–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞, –∞—É–¥–∏–æ –∏—Å—á–µ–∑–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

### 1. **–ß–∏—Å—Ç—ã–π —á–∞—Ç**
- –ù–∏–∫–∞–∫–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∞—É–¥–∏–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ = –æ–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞–∫ –≤ ANKI/Duolingo

### 2. **–õ—É—á—à–∏–π UX**
- –ê—É–¥–∏–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏
- –ö–Ω–æ–ø–∫–∏ –æ—Ü–µ–Ω–∫–∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏

### 3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ file_id
- –ú–µ–Ω—å—à–µ API –≤—ã–∑–æ–≤–æ–≤
- –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ

### 4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Fallback –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É @FilevskiyBot:**

1. **–ü–æ–∫–∞–∂–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É:**
   - –ù–∞–∂–º–∏—Ç–µ "üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç"
   - –£–≤–∏–¥–∏—Ç–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫–∏ –∞—É–¥–∏–æ

2. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –∞—É–¥–∏–æ:**
   - –ù–∞–∂–º–∏—Ç–µ "‚ñ∂Ô∏è –ì–æ–ª–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è"
   - **–ê—É–¥–∏–æ –ø–ª–µ–µ—Ä –ø–æ—è–≤–∏—Ç—Å—è –≤ —Ç–æ–º –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–∏!**
   - –ö–Ω–æ–ø–∫–∏ –æ—Ü–µ–Ω–∫–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏

3. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –∞—É–¥–∏–æ:**
   - –ù–∞–∂–º–∏—Ç–µ "üé≠ –ì–æ–ª–æ—Å –∞–∫—Ç–µ—Ä–∞"
   - **–ê—É–¥–∏–æ –ø–ª–µ–µ—Ä –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤ —Ç–æ–º –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–∏!**

4. **–û—Ü–µ–Ω–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É:**
   - –ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –æ—Ü–µ–Ω–∫—É (‚úÖ/ü§î/‚ùå)
   - **–ü–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞, –∞—É–¥–∏–æ –∏—Å—á–µ–∑–Ω–µ—Ç!**

---

## üéä **INLINE –ê–£–î–ò–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û!**

**–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**
- ‚úÖ –ê—É–¥–∏–æ –≤ —Ç–æ–º –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–∏
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –æ—Ü–µ–Ω–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞—Ä—Ç–æ—á–∫–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ file_id
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

**–ü–†–û–¢–ï–°–¢–ò–†–£–ô–¢–ï –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°!** üöÄ‚ú®

_–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É @FilevskiyBot –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ inline –∞—É–¥–∏–æ!_
