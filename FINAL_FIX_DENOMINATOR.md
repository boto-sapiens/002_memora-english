# ‚úÖ –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–ù–ê–ú–ï–ù–ê–¢–ï–õ–Ø!

## üêõ –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

### –ß—Ç–æ –±—ã–ª–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å —É–º–µ–Ω—å—à–∞–ª—Å—è** - "1/10" ‚Üí "1/9" (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "1/21")
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - `current_session_total = len(learning_cards)` –≤–º–µ—Å—Ç–æ `len(all_cards)`
3. **–ü—É—Ç–∞–Ω–∏—Ü–∞ —Å —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–µ–π** - —è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–Ω–∏–º–∞–ª —á–∏—Å–ª–∏—Ç–µ–ª—å/–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—è

**–í `services/card_manager.py:25`** (Learning Phase):
```python
# Initialize learning session
cards = await storage.get_user_cards(telegram_id)
user.current_session_total = len(cards)  # Total cards (21), not just learning cards
```

**–ë—ã–ª–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
learning_cards = [c for c in cards if c.status == 'learning']
user.current_session_total = len(learning_cards)  # –ú–æ–≥–ª–æ –±—ã—Ç—å 10, 9, 8...
```

**–°—Ç–∞–ª–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```python
user.current_session_total = len(cards)  # –í—Å–µ–≥–¥–∞ 21
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω fallback –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è learning phase

**–í `handlers/start.py:90-93`**:
```python
if not user.current_session_total:
    # Initialize session total if not set
    cards = await storage.get_user_cards(telegram_id)
    user.current_session_total = len(cards)  # Total cards (21)
```

### 3. –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è (–¥–ª—è —è—Å–Ω–æ—Å—Ç–∏):

**–í –∑–∞–ø–∏—Å–∏ "1/21":**
- **–ß–∏—Å–ª–∏—Ç–µ–ª—å = 1** (—Å–≤–µ—Ä—Ö—É) - —Ç–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
- **–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å = 21** (—Å–Ω–∏–∑—É) - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫

---

## üéØ –¢–µ–ø–µ—Ä—å –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

### Learning Phase (21 –∫–∞—Ä—Ç–æ—á–∫–∞):
```
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: current_session_total = 21 (–≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏)

–ü–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞:
  current_session_index = 0
  –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ—Å—Å: 0+1/21 = 1/21 ‚úÖ

–ü–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏:
  current_session_index += 1 = 1
  –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ—Å—Å: 1+1/21 = 2/21 ‚úÖ

–ü–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏:
  current_session_index += 1 = 2
  –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ—Å—Å: 2+1/21 = 3/21 ‚úÖ

...
–ü–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏:
  current_session_index += 1 = 20
  –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ—Å—Å: 20+1/21 = 21/21 ‚úÖ
```

**–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ 21!** ‚úÖ

### Review Phase (–Ω–∞–ø—Ä–∏–º–µ—Ä, 16 –∫–∞—Ä—Ç–æ—á–µ–∫):
```
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: current_session_total = 16 (–≥–æ—Ç–æ–≤—ã–µ –∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é)

–ü–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞:
  current_session_index = 0
  –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ—Å—Å: 0+1/16 = 1/16 ‚úÖ

–ü–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏:
  current_session_index += 1 = 1
  –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ—Å—Å: 1+1/16 = 2/16 ‚úÖ

...
–ü–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏:
  current_session_index += 1 = 15
  –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ—Å—Å: 15+1/16 = 16/16 ‚úÖ
```

**–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ —Å–µ—Å—Å–∏–∏!** ‚úÖ

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞:

### 1. Learning Phase:
```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
user.current_session_total = len(all_cards)  # 21 (–≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
user.current_session_index = 0

# –ü–æ–∫–∞–∑ –∫–∞—Ä—Ç–æ—á–∫–∏
user.current_session_index += 1
display = f"{current_session_index + 1}/{current_session_total}"  # 1/21, 2/21, ...
```

### 2. Review Phase:
```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
user.current_session_total = len(due_cards)  # 16 (–≥–æ—Ç–æ–≤—ã–µ –∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é)
user.current_session_index = 0

# –ü–æ–∫–∞–∑ –∫–∞—Ä—Ç–æ—á–∫–∏
user.current_session_index += 1
display = f"{current_session_index + 1}/{current_session_total}"  # 1/16, 2/16, ...
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É @FilevskiyBot:**

1. **Learning Phase:**
   - –ü—Ä–æ–≥—Ä–µ—Å—Å: 1/21 ‚Üê –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å 21!
   - –û—Ü–µ–Ω–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É
   - –ü—Ä–æ–≥—Ä–µ—Å—Å: 2/21 ‚Üê –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è!
   - –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –¥–æ 21/21

2. **Review Phase (—á–µ—Ä–µ–∑ —á–∞—Å):**
   - "X –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"
   - [–ù–∞—á–∞—Ç—å]
   - –ü—Ä–æ–≥—Ä–µ—Å—Å: 1/X ‚Üê –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å!
   - –ü—Ä–æ–≥—Ä–µ—Å—Å: 2/X ‚Üê –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è!
   - ...
   - –ü—Ä–æ–≥—Ä–µ—Å—Å: X/X

---

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!

**–ß–∏—Å–ª–∏—Ç–µ–ª—å:** ‚úÖ –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (1, 2, 3, ...)  
**–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å:** ‚úÖ –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ —Å–µ—Å—Å–∏–∏ (21 –¥–ª—è learning, X –¥–ª—è review)  
**–õ–æ–≥–∏–∫–∞ ANKI:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!** üöÄ

_–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É @FilevskiyBot!_
