# ‚úÖ ANKI –õ–æ–≥–∏–∫–∞ —Å–µ—Å—Å–∏–π - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–∞–∫ –≤ ANKI)

### üéØ –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø

**–í —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫ **—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è** –≤ –Ω–∞—á–∞–ª–µ
- –ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å **–ù–ï –º–µ–Ω—è–µ—Ç—Å—è** –¥–æ –∫–æ–Ω—Ü–∞ —Å–µ—Å—Å–∏–∏
- –ö–∞—Ä—Ç–æ—á–∫–∏ **–Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è** –ø–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

---

## üìä –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –î–µ–Ω—å 1 - –û–±—É—á–µ–Ω–∏–µ (Learning Phase):

**–ù–∞—á–∞–ª–æ:**
```
/start ‚Üí –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 21 –∫–∞—Ä—Ç–æ—á–∫–∏
```

**–°–µ—Å—Å–∏—è:**
```
–ö–∞—Ä—Ç–æ—á–∫–∞ 1/21  ‚Üí –û—Ü–µ–Ω–∫–∞ ‚Üí –£–±—Ä–∞–Ω–∞ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
–ö–∞—Ä—Ç–æ—á–∫–∞ 2/21  ‚Üí –û—Ü–µ–Ω–∫–∞ ‚Üí –£–±—Ä–∞–Ω–∞ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
...
–ö–∞—Ä—Ç–æ—á–∫–∞ 21/21 ‚Üí –û—Ü–µ–Ω–∫–∞ ‚Üí –£–±—Ä–∞–Ω–∞ –∏–∑ –æ—á–µ—Ä–µ–¥–∏

‚Üí "–û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
‚Üí –í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Å—Ç–∞—Ç—É—Å–µ "review"
```

**–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å 21 –Ω–µ –º–µ–Ω—è–ª—Å—è!** ‚úÖ

---

### –î–µ–Ω—å 2 - –ü–µ—Ä–≤–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ:

**–ì–æ—Ç–æ–≤—ã –∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é:** 16 –∫–∞—Ä—Ç–æ—á–µ–∫ (—Ç–µ —á—Ç–æ "–Ω–µ –∑–Ω–∞–ª" + "—Å–æ–º–Ω–µ–≤–∞–ª—Å—è" —á–µ—Ä–µ–∑ 1—á/4—á)

**–ù–∞—á–∞–ª–æ —Å–µ—Å—Å–∏–∏:**
```
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "16 –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"
[üîÑ –ù–∞—á–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ] ‚Üê –ù–∞–∂–∞—Ç—å

‚Üí current_session_total = 16 (–§–ò–ö–°–ò–†–£–ï–¢–°–Ø!)
‚Üí current_session_index = 1
```

**–°–µ—Å—Å–∏—è:**
```
–ö–∞—Ä—Ç–æ—á–∫–∞: –ü—Ä–æ–≥—Ä–µ—Å—Å: 1/16  ‚Üí –û—Ü–µ–Ω–∫–∞ ‚Üí –£–±—Ä–∞–Ω–∞
–ö–∞—Ä—Ç–æ—á–∫–∞: –ü—Ä–æ–≥—Ä–µ—Å—Å: 2/16  ‚Üí –û—Ü–µ–Ω–∫–∞ ‚Üí –£–±—Ä–∞–Ω–∞
...
–ö–∞—Ä—Ç–æ—á–∫–∞: –ü—Ä–æ–≥—Ä–µ—Å—Å: 16/16 ‚Üí –û—Ü–µ–Ω–∫–∞ ‚Üí –£–±—Ä–∞–Ω–∞

‚Üí "–í—Å–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–æ!"
‚Üí session_total = None (—Å–±—Ä–æ—Å)
```

**–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å 16 –Ω–µ –º–µ–Ω—è–ª—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏!** ‚úÖ

---

### –î–µ–Ω—å 3 - –í—Ç–æ—Ä–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ:

**–ì–æ—Ç–æ–≤—ã –∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é:** 8 –∫–∞—Ä—Ç–æ—á–µ–∫ (–¥—Ä—É–≥–∏–µ –µ—â–µ –Ω–µ –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è)

**–ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏:**
```
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "8 –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"
[üîÑ –ù–∞—á–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ]

‚Üí current_session_total = 8 (–ù–û–í–û–ï –∑–Ω–∞—á–µ–Ω–∏–µ!)
‚Üí current_session_index = 1
```

**–ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è:**
```
–ü—Ä–æ–≥—Ä–µ—Å—Å: 1/8  ‚Üí –û—Ü–µ–Ω–∫–∞
–ü—Ä–æ–≥—Ä–µ—Å—Å: 2/8  ‚Üí –û—Ü–µ–Ω–∫–∞
...
–ü—Ä–æ–≥—Ä–µ—Å—Å: 8/8  ‚Üí –û—Ü–µ–Ω–∫–∞

‚Üí "–í—Å–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–æ!"
```

**–ù–æ–≤—ã–π –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å 8!** –ú–µ–Ω—å—à–µ –ø–æ—Ç–æ–º—É —á—Ç–æ —á–∞—Å—Ç—å –∫–∞—Ä—Ç–æ—á–µ–∫ "–∑–Ω–∞–ª" ‚Üí –±–æ–ª—å—à–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã ‚úÖ

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –ù–∞—á–∞–ª–æ —Å–µ—Å—Å–∏–∏ (handlers/start.py)

```python
@router.callback_query(F.data == "start_review")
async def start_review(callback: CallbackQuery):
    due_cards = await card_manager.get_cards_for_review(telegram_id)
    
    # –§–ò–ö–°–ò–†–£–ï–ú –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –Ω–∞—á–∞–ª–µ
    user.current_session_total = len(due_cards)  # 16
    user.current_session_index = 1              # –ü–µ—Ä–≤–∞—è
    await storage.save_user(user)
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é
    await callback.message.edit_text(
        f"–ü—Ä–æ–≥—Ä–µ—Å—Å: 1/{len(due_cards)}"  # 1/16
    )
```

**–ö–ª—é—á–µ–≤–æ–µ:** `current_session_total = len(due_cards)` - —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑!

---

### 2. –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ (handlers/review.py)

```python
async def show_next_card(callback, telegram_id):
    # –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä–æ–µ –∞—É–¥–∏–æ
    await delete_last_audio(callback, telegram_id)
    
    # –ü–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∫–∞—Ä—Ç–æ—á–∫—É
    due_cards = await card_manager.get_cards_for_review(telegram_id)
    
    if due_cards:
        # –£–í–ï–õ–ò–ß–ò–í–ê–ï–ú –∏–Ω–¥–µ–∫—Å
        user.current_session_index += 1
        
        # Total –ù–ï –º–µ–Ω—è–µ—Ç—Å—è! –ë–µ—Ä–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ
        session_index = user.current_session_index  # 2, 3, 4...
        session_total = user.current_session_total  # –í—Å–µ –µ—â–µ 16!
        
        await callback.message.edit_text(
            f"–ü—Ä–æ–≥—Ä–µ—Å—Å: {session_index}/{session_total}"  # 2/16, 3/16...
        )
```

**–ö–ª—é—á–µ–≤–æ–µ:** `session_total` –ù–ï –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è! –ë–µ—Ä–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!

---

### 3. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

```python
else:
    # –ö–∞—Ä—Ç–æ—á–µ–∫ –±–æ–ª—å—à–µ –Ω–µ—Ç
    # –°–ë–†–ê–°–´–í–ê–ï–ú —Å—á–µ—Ç—á–∏–∫–∏
    user.current_session_total = None
    user.current_session_index = 0
    await storage.save_user(user)
    
    await callback.message.edit_text(
        "‚úÖ –û—Ç–ª–∏—á–Ω–æ! –í—Å–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–æ!"
    )
```

**–ö–ª—é—á–µ–≤–æ–µ:** –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è!

---

## üìñ –õ–æ–≥–∏–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

### –ü–æ—Å–ª–µ –æ—Ü–µ–Ω–∫–∏ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏:

**‚úÖ –ó–Ω–∞–ª:**
```
interval_index += 1  (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0 ‚Üí 1, —Ç–æ –µ—Å—Ç—å 1—á ‚Üí 4—á)
next_review_time = now + 4 —á–∞—Å–∞
‚Üí –ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
‚Üí –ü–æ—è–≤–∏—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ 4 —á–∞—Å–∞
```

**ü§î –°–æ–º–Ω–µ–≤–∞–ª—Å—è:**
```
interval_index = 0  (–æ—Å—Ç–∞–ª—Å—è 1 —á–∞—Å)
next_review_time = now + 1 —á–∞—Å
‚Üí –ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
‚Üí –ü–æ—è–≤–∏—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ 1 —á–∞—Å
```

**‚ùå –ù–µ –∑–Ω–∞–ª:**
```
interval_index = 0  (—Å–±—Ä–æ—à–µ–Ω –Ω–∞ 1 —á–∞—Å)
next_review_time = now + 1 —á–∞—Å
‚Üí –ö–∞—Ä—Ç–æ—á–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
‚Üí –ü–æ—è–≤–∏—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ 1 —á–∞—Å
```

---

## üéÆ –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä

### –°–µ—Å—Å–∏—è 1 (–î–µ–Ω—å 1, 10:00):

```
–ì–æ—Ç–æ–≤–æ –∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é: 21 –∫–∞—Ä—Ç–æ—á–∫–∞ (–≤—Å–µ)

[–ù–∞—á–∞—Ç—å] ‚Üí session_total = 21, index = 1

–ü—Ä–æ–≥—Ä–µ—Å—Å: 1/21  ‚Üí ‚úÖ –ó–Ω–∞–ª    ‚Üí interval = 1 (4—á), next = 14:00
–ü—Ä–æ–≥—Ä–µ—Å—Å: 2/21  ‚Üí ‚úÖ –ó–Ω–∞–ª    ‚Üí interval = 1 (4—á), next = 14:00
–ü—Ä–æ–≥—Ä–µ—Å—Å: 3/21  ‚Üí ü§î –°–æ–º–Ω–µ–≤  ‚Üí interval = 0 (1—á), next = 11:00
–ü—Ä–æ–≥—Ä–µ—Å—Å: 4/21  ‚Üí ‚ùå –ù–µ –∑–Ω–∞–ª ‚Üí interval = 0 (1—á), next = 11:00
–ü—Ä–æ–≥—Ä–µ—Å—Å: 5/21  ‚Üí ‚úÖ –ó–Ω–∞–ª    ‚Üí interval = 1 (4—á), next = 14:00
...
–ü—Ä–æ–≥—Ä–µ—Å—Å: 21/21 ‚Üí –û—Ü–µ–Ω–∫–∞

‚Üí "–í—Å–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–æ!"
‚Üí session_total = None
```

---

### –°–µ—Å—Å–∏—è 2 (–î–µ–Ω—å 1, 11:00):

**–ì–æ—Ç–æ–≤–æ:** 2 –∫–∞—Ä—Ç–æ—á–∫–∏ (—Ç–µ —á—Ç–æ "—Å–æ–º–Ω–µ–≤–∞–ª—Å—è" + "–Ω–µ –∑–Ω–∞–ª" —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 1—á)

```
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "2 –∫–∞—Ä—Ç–æ—á–∫–∏"
[–ù–∞—á–∞—Ç—å] ‚Üí session_total = 2, index = 1

–ü—Ä–æ–≥—Ä–µ—Å—Å: 1/2  ‚Üí ‚úÖ –ó–Ω–∞–ª  ‚Üí interval = 1, next = 15:00
–ü—Ä–æ–≥—Ä–µ—Å—Å: 2/2  ‚Üí ‚úÖ –ó–Ω–∞–ª  ‚Üí interval = 1, next = 15:00

‚Üí "–í—Å–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–æ!"
```

**–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –±—ã–ª 2, –∞ –Ω–µ 21!** ‚úÖ

---

### –°–µ—Å—Å–∏—è 3 (–î–µ–Ω—å 1, 14:00):

**–ì–æ—Ç–æ–≤–æ:** 19 –∫–∞—Ä—Ç–æ—á–µ–∫ (–≤—Å–µ –∫—Ä–æ–º–µ –¥–≤—É—Ö –∏–∑ —Å–µ—Å—Å–∏–∏ 2)

```
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "19 –∫–∞—Ä—Ç–æ—á–µ–∫"
[–ù–∞—á–∞—Ç—å] ‚Üí session_total = 19, index = 1

–ü—Ä–æ–≥—Ä–µ—Å—Å: 1/19, 2/19, ... 19/19
```

**–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å 19!** –ú–µ–Ω—å—à–µ —á–µ–º 21 –ø–æ—Ç–æ–º—É —á—Ç–æ 2 –∫–∞—Ä—Ç–æ—á–∫–∏ –µ—â–µ –≤ –±—É–¥—É—â–µ–º ‚úÖ

---

## ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞!

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. ‚úÖ Session total —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ
2. ‚úÖ Session index —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
3. ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
4. ‚úÖ Total –ù–ï –º–µ–Ω—è–µ—Ç—Å—è –¥–æ –∫–æ–Ω—Ü–∞ —Å–µ—Å—Å–∏–∏
5. ‚úÖ –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ —Å—á–µ—Ç—á–∏–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
6. ‚úÖ –°–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è - –Ω–æ–≤—ã–π total

**–≠—Ç–æ —Ç–æ—á–Ω–æ –∫–∞–∫ –≤ ANKI!** üéØ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É @FilevskiyBot:**

1. –ü—Ä–æ–≥—Ä–µ—Å—Å: 1/21
2. –û—Ü–µ–Ω–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É
3. –ü—Ä–æ–≥—Ä–µ—Å—Å: 2/21 (–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è!)
4. –ü—Ä–æ–π–¥–∏—Ç–µ –≤—Å–µ 21
5. –ü—Ä–æ–≥—Ä–µ—Å—Å: 21/21
6. "–û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"

**–ß–µ—Ä–µ–∑ —á–∞—Å (–ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ):**
1. "X –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"
2. [–ù–∞—á–∞—Ç—å]
3. –ü—Ä–æ–≥—Ä–µ—Å—Å: 1/X (–Ω–æ–≤—ã–π –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å!)
4. –ü—Ä–æ–≥—Ä–µ—Å—Å: 2/X (–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
5. ...
6. –ü—Ä–æ–≥—Ä–µ—Å—Å: X/X

**–õ–æ–≥–∏–∫–∞ ANKI —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** ‚úÖ

---

**–ë–æ—Ç –≥–æ—Ç–æ–≤! –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!** üöÄ

