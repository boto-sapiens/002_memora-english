# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã /progress - –ó–∞–≤–µ—Ä—à–µ–Ω–∞

## –°–≤–æ–¥–∫–∞

–£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/progress` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å User (`storage/models.py`)

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è:
```python
last_activity_date: Optional[str] = None  # –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
current_streak: int = 0                   # –°–µ—Ä–∏—è –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥
total_reviews: int = 0                    # –í—Å–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
knew_count: int = 0                       # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ "–ó–Ω–∞–ª"
doubt_count: int = 0                      # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ "–°–æ–º–Ω–µ–≤–∞–ª—Å—è"
forgot_count: int = 0                     # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ "–ù–µ –∑–Ω–∞–ª"
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π card_manager (`services/card_manager.py`)

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`process_response`):
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –æ–±—â–∏–π —Å—á–µ—Ç—á–∏–∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è streak:
  - +1 –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±—ã–ª–∞ –≤—á–µ—Ä–∞
  - reset –Ω–∞ 1 –µ—Å–ª–∏ –±—ã–ª –ø—Ä–æ–ø—É—Å–∫
  - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É–∂–µ —Å–µ–≥–æ–¥–Ω—è –±—ã–ª–∞

### 3. –ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å `services/progress_service.py`

–§—É–Ω–∫—Ü–∏—è `get_progress_stats()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- `total_cards` - –≤—Å–µ–≥–æ –∫–∞—Ä—Ç–æ—á–µ–∫
- `learned_cards` - –∏–∑—É—á–µ–Ω–Ω—ã–µ (–≤ review)
- `due_cards` - –æ–∂–∏–¥–∞—é—â–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- `next_review_time` - –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- `knew_count`, `doubt_count`, `forgot_count` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
- `current_streak` - —Å–µ—Ä–∏—è –¥–Ω–µ–π
- `total_reviews` - –≤—Å–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π

### 4. –ù–æ–≤—ã–π handler `handlers/progress.py`

–ö–æ–º–∞–Ω–¥–∞ `/progress`:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ progress_service
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ —Å —ç–º–æ–¥–∑–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ

### 5. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ `bot.py`

```python
from handlers import start, review, progress
dp.include_router(progress.router)
```

### 6. –ú–∏–≥—Ä–∞—Ü–∏—è `migrate_users.py`

–°–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –Ω—É–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

### 7. –¢–µ—Å—Ç `test_progress.py`

–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã progress_service.

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥–∞
```
/progress
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞
```
üìä –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å:

üìö –í—Å–µ–≥–æ —Å–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–π: 21
‚úÖ –ò–∑—É—á–µ–Ω–æ: 21
‚è∞ –û–∂–∏–¥–∞—é—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è: 0
üìÖ –°–ª–µ–¥—É—é—â–µ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ: 19.10.2025 09:16

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤:
‚úÖ –ó–Ω–∞–ª: 5 —Ä–∞–∑
ü§î –°–æ–º–Ω–µ–≤–∞–ª—Å—è: 2 —Ä–∞–∑
‚ùå –ù–µ –∑–Ω–∞–ª: 1 —Ä–∞–∑

üî• –°–µ—Ä–∏—è –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥: 1
üìù –í—Å–µ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π: 8
```

---

## –§–∞–π–ª—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ:
1. `services/progress_service.py` - —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
2. `handlers/progress.py` - handler –∫–æ–º–∞–Ω–¥—ã
3. `migrate_users.py` - —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
4. `test_progress.py` - —Ç–µ—Å—Ç
5. `PROGRESS_FEATURE.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ:
1. `storage/models.py` - —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –º–æ–¥–µ–ª—å User
2. `services/card_manager.py` - –¥–æ–±–∞–≤–ª–µ–Ω —É—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
3. `bot.py` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω progress handler
4. `handlers/__init__.py` - –æ–±–Ω–æ–≤–ª–µ–Ω

---

## –ó–∞–ø—É—Å–∫

–ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:

```bash
cd ~/projects/FilevskiyBot
pkill -f "python bot.py"
pkill -f "python scheduler"
source venv/bin/activate
nohup python bot.py > logs/bot.log 2>&1 &
nohup python scheduler_runner.py > logs/scheduler.log 2>&1 &
```

–°—Ç–∞—Ç—É—Å:
- ‚úÖ Bot: Running (PID 600435)
- ‚úÖ Scheduler: Running

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/progress` –≤ Telegram ‚Üí –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
2. –ü—Ä–æ–π–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/progress` —Å–Ω–æ–≤–∞ ‚Üí —Å—á–µ—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤—è—Ç—Å—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ streak –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å

---

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Streak
- –°—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –¥–Ω—è–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –¥–Ω—è
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ
- –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–∞—è (–Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è)
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –≤ learning, —Ç–∞–∫ –∏ –≤ review —Ñ–∞–∑–µ

### –°–ª–µ–¥—É—é—â–µ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
- –ï—Å–ª–∏ –Ω–µ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ ‚Üí "–≤—Å–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã"
- –í—Ä–µ–º—è –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ (UTC+3)

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/progress` –±–æ—Ç—É @FilevskiyBot –≤ Telegram! üéâ

